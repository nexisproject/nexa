<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/kit/logger/logger_optimization_test.go">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/kit/logger/logger_optimization_test.go" />
              <option name="updatedContent" value="// Copyright (C) micros. 2025-present.&#10;//&#10;// Created at 2025-01-06, by liasica&#10;&#10;package logger&#10;&#10;import (&#10;&#9;&quot;testing&quot;&#10;&#10;&#9;&quot;go.uber.org/zap&quot;&#10;&#9;&quot;go.uber.org/zap/zapcore&quot;&#10;&#10;&#9;&quot;nexis.run/nexa/kit/configure&quot;&#10;)&#10;&#10;func TestLoggerSetup(t *testing.T) {&#10;&#9;// 测试仅 stdout 配置&#10;&#9;t.Run(&quot;StdoutOnly&quot;, func(t *testing.T) {&#10;&#9;&#9;cfg := &amp;configure.Logger{&#10;&#9;&#9;&#9;Stdout: true,&#10;&#9;&#9;}&#10;&#9;&#9;Setup(cfg)&#10;&#9;&#9;&#10;&#9;&#9;// 测试不同级别的日志&#10;&#9;&#9;zap.L().Debug(&quot;这是 Debug 日志 - 只应该在控制台看到&quot;)&#10;&#9;&#9;zap.L().Info(&quot;这是 Info 日志 - 只应该在控制台看到&quot;)&#10;&#9;&#9;zap.L().Warn(&quot;这是 Warn 日志 - 只应该在控制台看到&quot;)&#10;&#9;&#9;zap.L().Error(&quot;这是 Error 日志 - 只应该在控制台看到&quot;)&#10;&#9;})&#10;&#10;&#9;// 测试 stdout + kafka 配置&#10;&#9;t.Run(&quot;StdoutAndKafka&quot;, func(t *testing.T) {&#10;&#9;&#9;cfg := &amp;configure.Logger{&#10;&#9;&#9;&#9;Stdout: true,&#10;&#9;&#9;&#9;Kafka: &amp;configure.Kafka{&#10;&#9;&#9;&#9;&#9;Brokers: []string{&quot;localhost:9092&quot;},&#10;&#9;&#9;&#9;&#9;Topic:   &quot;test-logs&quot;,&#10;&#9;&#9;&#9;},&#10;&#9;&#9;}&#10;&#9;&#9;Setup(cfg)&#10;&#9;&#9;&#10;&#9;&#9;// 测试不同级别的日志&#10;&#9;&#9;zap.L().Debug(&quot;Debug 日志 - 只在控制台显示，不进入 Kafka&quot;)&#10;&#9;&#9;zap.L().Info(&quot;Info 日志 - 控制台显示，同时进入 Kafka&quot;)&#10;&#9;&#9;zap.L().Warn(&quot;Warn 日志 - 控制台显示，同时进入 Kafka&quot;)&#10;&#9;&#9;zap.L().Error(&quot;Error 日志 - 控制台显示，同时进入 Kafka&quot;)&#10;&#9;})&#10;&#10;&#9;// 测试仅 kafka 配置&#10;&#9;t.Run(&quot;KafkaOnly&quot;, func(t *testing.T) {&#10;&#9;&#9;cfg := &amp;configure.Logger{&#10;&#9;&#9;&#9;Kafka: &amp;configure.Kafka{&#10;&#9;&#9;&#9;&#9;Brokers: []string{&quot;localhost:9092&quot;},&#10;&#9;&#9;&#9;&#9;Topic:   &quot;test-logs&quot;,&#10;&#9;&#9;&#9;},&#10;&#9;&#9;}&#10;&#9;&#9;Setup(cfg)&#10;&#9;&#9;&#10;&#9;&#9;// 测试不同级别的日志&#10;&#9;&#9;zap.L().Debug(&quot;Debug 日志 - 不会被记录&quot;)&#10;&#9;&#9;zap.L().Info(&quot;Info 日志 - 只进入 Kafka&quot;)&#10;&#9;&#9;zap.L().Warn(&quot;Warn 日志 - 只进入 Kafka&quot;)&#10;&#9;&#9;zap.L().Error(&quot;Error 日志 - 只进入 Kafka&quot;)&#10;&#9;})&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>